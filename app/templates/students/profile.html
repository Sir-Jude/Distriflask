{% extends 'students/index.html' %}
{% block title %}
  <title>{{ current_user.username.title() }}</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='student_styles.css') }}">
{% endblock %}
{% block content %}
{% for message in get_flashed_messages() %}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
{% endfor %}
  <p>
    <h3>{{ current_user.username.title() }}'s profile.</h3>
  </p>
  <div class="student-profile">
    {% if course %}
        <p><h5>Course: </h5>{{ course }}</p>
        <p><h5>Country: </h5>{{ country }} </p>
      <h5>
        Select exercise:
        <h6>
          {# Change username=current_user.username to username=username #}
          {# This allows admin to behave as students and download any available exercise #}
          <form action="{{ url_for('students.profile', username=username) }}" method="POST">
            {{ form.csrf_token }}
            {{ form.hidden_tag() }}
            <select name="exercise_number">
            {% for release in exercises %}
              <option value="{{ release.version }}">{{ release.version }}</option>
            {% endfor %}
            </select>
            <button type="submit" class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;">Download</button>
          </form>
        </h6>
      </h5>
    {% else %}
      <p>No course associated with this user.</p>
    {% endif %}
  </div>
{% endblock %}
